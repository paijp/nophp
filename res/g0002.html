<FORM method=POST>
Welcome `login__:loginrecord`!
<INPUT type=submit name=":logout" value="logout">
<A href="g9999.html">index</A>
</FORM>
<FORM method=POST>
<INPUT type=text name=":reportbody" size=60>
<INPUT type=submit value="send report">
</FORM>
<TABLE border width="32%">
<TR><TH>tables.php
<TR><TD><PRE>&lt;?php

class	message2_table extends a_table {
	function	getconfig() {
		return parent::getconfig().&lt;&lt;&lt;EOO
owner	integer	/*indexed*/
body	text

EOO;
	}
}
new message2_table();

</PRE>
</TABLE>

<UL>
	<LI>いままで、テーブルには何も登録しないで進めてきました。
	<LI>この場合、テーブルに登録されていないフィールドにアクセスすると、自動的にmixedというフィールドの中にエスケープして保存されます。
	<LI>しかしこれでは、SQLのwhereによる検索やorderによるソートができません。
</UL>


<UL>
	<LI>上記では、ownerとbodyを実フィールドとして登録しています。
	<LI>さらに、ownerにはインディックスをつけています(内部的に文字列処理で認識しているため、「/*indexed*/」には空白などは入れないでください)。
	<LI>ownerとbody以外(これまでの例ではmailなど)は、今までどおりmixedに保存されます。
</UL>


<UL>
	<LI>なお、tables.phpでテーブルを追加したりフィールドを追加したりインディックスを追加したりした場合は、?mode=sqlの画面でcreateのボタンを押すと、データベースが更新されます。
</UL>
<UL><UL>
	<LI>登録済みのデータは失われません。
	<LI>追加されたテーブル・フィールド・インディックスがあれば、それらをデータベースに追加します。
	<LI>すでにmixedに収容されているフィールドが、実フィールドとして追加された場合は、mixedから実フィールドにデータを移動します。
</UL></UL>

<TABLE border width="96%">
<TR><TH>g0002.html
<TH>HTML sent to the browser
<TH>Display on the browser(can be operated)
<TR><TD width="33%">&lt;FORM method=POST&gt;<br />
&lt;!--{tableid message2--&gt;<br />
記事を投稿する:<br />
&lt;INPUT type=hidden name=&quot;id__:loginrecord__owner__:set&quot;&gt;<br />
&lt;TEXTAREA name=&quot;body&quot; cols=40 rows=10&gt;&lt;/TEXTAREA&gt;<br />
&lt;INPUT type=submit name=&quot;:curtable:h_update:popall:curpage:jump&quot; value=&quot;投稿&quot;&gt;<br />
&lt;!--}--&gt;<br />
&lt;/FORM&gt;<br />
<br />
&lt;!--{selectrows from message2 order by id desc --&gt;<br />
&lt;HR&gt;<br />
&lt;SPAN style=&quot;color:#a0a0a0;&quot;&gt;#`:bq`id__:r`:bq`&lt;/SPAN&gt;<br />
&lt;B&gt;`:bq`owner__:r__login__login__:t_id`:bq`&lt;/B&gt;<br />
&lt;SPAN style=&quot;color:#a0a0a0;&quot;&gt;`:bq`created__:r__y/m/d H:i:s__:todate`:bq`&lt;/SPAN&gt;<br />
&lt;PRE&gt;`:bq`body__:r`:bq`&lt;/PRE&gt;<br />
&lt;!--}--&gt;<br />
<br />
&lt;HR&gt;<br />
<br />

<TD width="34%"><!--{htmlsrc--><FORM method=POST>
<!--{tableid message2-->
記事を投稿する:
<INPUT type=hidden name="id__:loginrecord__owner__:set">
<TEXTAREA name="body" cols=40 rows=10></TEXTAREA>
<INPUT type=submit name=":curtable:h_update:popall:curpage:jump" value="投稿">
<!--}-->
</FORM>

<!--{selectrows from message2 order by id desc -->
<HR>
<SPAN style="color:#a0a0a0;">#`id__:r`</SPAN>
<B>`owner__:r__login__login__:t_id`</B>
<SPAN style="color:#a0a0a0;">`created__:r__y/m/d H:i:s__:todate`</SPAN>
<PRE>`body__:r`</PRE>
<!--}-->

<HR>

<!--}-->
<TD width="33%"><FORM method=POST>
<!--{tableid message2-->
記事を投稿する:
<INPUT type=hidden name="id__:loginrecord__owner__:set">
<TEXTAREA name="body" cols=40 rows=10></TEXTAREA>
<INPUT type=submit name=":curtable:h_update:popall:curpage:jump" value="投稿">
<!--}-->
</FORM>

<!--{selectrows from message2 order by id desc -->
<HR>
<SPAN style="color:#a0a0a0;">#`id__:r`</SPAN>
<B>`owner__:r__login__login__:t_id`</B>
<SPAN style="color:#a0a0a0;">`created__:r__y/m/d H:i:s__:todate`</SPAN>
<PRE>`body__:r`</PRE>
<!--}-->

<HR>


</TABLE>

<UL>
	<LI>使い方は一緒ですが、内部的には実フィールドが読み書きされています。
</UL>


<UL>
	<LI>次節で、このデータを検索します。
</UL>


<HR>
